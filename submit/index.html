<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Dream - DREAM_TERMINAL</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <canvas class="matrix-bg" id="matrix"></canvas>

    <div class="container">
        <!-- Header -->
        <header>
            <h1><a href="/" style="color: inherit; text-decoration: none;">DREAM_TERMINAL<span class="cursor"></span></a></h1>
            <p class="subtitle">⟨ ANONYMOUS DREAM ARCHIVE ⟩</p>
        </header>

        <!-- Navigation -->
        <nav>
            <a href="/">HOME</a>
            <a href="/archive">DREAM ARCHIVE</a>
            <a href="/submit" class="active">SUBMIT DREAM</a>
            <a href="/about">ABOUT</a>
        </nav>

        <!-- Submit Section -->
        <section class="submit-section">
            <div class="terminal">
                <div class="terminal-header">
                    <span class="terminal-title">⟨ SUBMIT_DREAM.EXE ⟩</span>
                    <div class="terminal-buttons">
                        <div class="terminal-button"></div>
                        <div class="terminal-button"></div>
                        <div class="terminal-button"></div>
                    </div>
                </div>

                <div class="terminal-content">
                    <div class="instructions">
                        <p>> DREAM SUBMISSION PROTOCOL</p>
                        <p style="margin-top: 15px;">Your dream will be archived completely anonymously.</p>
                        <p>You will receive a unique dream ID upon submission.</p>
                        <p>Dreams cannot be deleted once archived.</p>
                        <p style="margin-top: 15px; color: var(--primary);"><span class="emphasis">⟨ READY TO SUBMIT TO THE VOID ⟩</span></p>
                    </div>

                    <!-- NETLIFY FORM VERSION -->
                    <!-- To use: Deploy on Netlify, form submissions will appear in your Netlify dashboard -->
                    <form
                        id="dreamForm"
                        name="dreams"
                        method="POST"
                        data-netlify="true"
                        netlify-honeypot="bot-field"
                    >
                        <!-- Hidden field for spam protection -->
                        <input type="hidden" name="form-name" value="dreams" />
                        <p style="display: none;">
                            <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                        </p>

                        <div class="form-group">
                            <label for="dreamContent">> DESCRIBE YOUR DREAM (REQUIRED):</label>
                            <textarea
                                id="dreamContent"
                                name="dreamContent"
                                placeholder="Last night I dreamed of..."
                                required
                                minlength="20"
                            ></textarea>
                            <div class="char-count">
                                <span id="charCount">0</span> characters
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="emotions">> PRIMARY EMOTION (OPTIONAL):</label>
                            <select id="emotions" name="emotions">
                                <option value="">-- Select --</option>
                                <option value="fear">Fear</option>
                                <option value="joy">Joy</option>
                                <option value="sadness">Sadness</option>
                                <option value="confusion">Confusion</option>
                                <option value="peace">Peace</option>
                                <option value="anxiety">Anxiety</option>
                                <option value="excitement">Excitement</option>
                                <option value="nostalgia">Nostalgia</option>
                                <option value="dread">Dread</option>
                                <option value="wonder">Wonder</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="symbols">> KEY SYMBOLS (OPTIONAL, COMMA SEPARATED):</label>
                            <input
                                type="text"
                                id="symbols"
                                name="symbols"
                                placeholder="water, doors, eyes, falling, flying..."
                            >
                            <div class="hint">Examples: water, mirror, falling, childhood home, stranger, ocean, stairs, animals</div>
                        </div>

                        <div class="form-group">
                            <label for="recurring">> IS THIS A RECURRING DREAM?</label>
                            <select id="recurring" name="recurring">
                                <option value="no">No, first time</option>
                                <option value="yes">Yes, I've had this before</option>
                                <option value="similar">Similar themes recur</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="consent" required>
                                I understand this dream will be archived anonymously and permanently
                            </label>
                        </div>

                        <button type="submit">[ SUBMIT TO THE VOID ]</button>
                    </form>

                    <div class="loading" id="loading">
                        <p class="loading-text">> TRANSMITTING TO VOID<span class="dots"></span></p>
                        <p class="loading-subtext">Your dream is being archived...</p>
                    </div>

                    <div class="success-message" id="successMessage">
                        <p class="success-title">> DREAM ARCHIVED SUCCESSFULLY</p>
                        <p class="dream-id-display">DREAM ID: <span id="generatedId"></span></p>
                        <p>Your dream has been preserved in the void.</p>
                        <p>It is now part of the collective unconscious.</p>
                        <p style="margin-top: 30px;">
                            <a href="/archive" class="cta-button">[ VIEW ARCHIVE ]</a>
                            <a href="/submit" class="cta-button" style="margin-left: 20px;">[ SUBMIT ANOTHER ]</a>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Alternative Instructions -->
            <div class="terminal" style="margin-top: 40px;">
                <div class="terminal-header">
                    <span class="terminal-title">⟨ TIPS.TXT ⟩</span>
                    <div class="terminal-buttons">
                        <div class="terminal-button"></div>
                        <div class="terminal-button"></div>
                        <div class="terminal-button"></div>
                    </div>
                </div>
                <div class="terminal-content">
                    <h3>>> HOW TO DESCRIBE YOUR DREAM:</h3>
                    <p>• Write in present tense: "I am flying" not "I flew"</p>
                    <p>• Include sensory details: colors, sounds, feelings</p>
                    <p>• Note recurring symbols or unusual elements</p>
                    <p>• Don't interpret - just describe what happened</p>
                    <p>• There are no wrong dreams to submit</p>

                    <h3 style="margin-top: 30px;">>> EXAMPLES OF GOOD SUBMISSIONS:</h3>
                    <p class="example">"I'm in my childhood home but all the doors lead to the ocean. I can hear my name in the waves but I can't see who's calling."</p>
                    <p class="example">"I'm at a party where everyone is wearing masks of my face. When I try to leave, I realize I'm also wearing a mask."</p>
                    <p class="example">"The sky is falling upward. People are holding onto the ground to avoid floating away. I decide to let go."</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p>⟨ DREAM_TERMINAL v0.1 ⟩</p>
            <p>IN DREAMS, ALL REALITIES ARE POSSIBLE</p>
            <p style="margin-top: 20px; opacity: 0.5;">[ THE ARCHIVE NEVER SLEEPS ]</p>
        </footer>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <p id="notificationText"></p>
    </div>

    <script src="/matrix.js"></script>
    <script>
        const form = document.getElementById('dreamForm');
        const loading = document.getElementById('loading');
        const successMessage = document.getElementById('successMessage');
        const textarea = document.getElementById('dreamContent');
        const charCount = document.getElementById('charCount');

        // Character counter
        textarea.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });

        // Handle form submission
        form.addEventListener('submit', function(e) {
            // For Netlify, the form will submit normally
            // Just show loading state
            loading.classList.add('active');
            form.style.display = 'none';

            // Generate dream ID
            const dreamId = 'DRM-' + String(Math.floor(Math.random() * 9999)).padStart(4, '0');

            // Note: With Netlify forms, the page will redirect after submission
            // If you want to show success message without redirect, you'll need
            // to use AJAX submission (see alternative version below)
        });

        // Alternative: AJAX submission for Netlify (prevents page reload)
        // Uncomment this and comment out the above if you want to stay on page
        /*
        form.addEventListener('submit', async function(e) {
            e.preventDefault();

            loading.classList.add('active');
            form.style.display = 'none';

            const formData = new FormData(form);

            try {
                await fetch('/', {
                    method: 'POST',
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: new URLSearchParams(formData).toString()
                });

                // Generate dream ID
                const dreamId = 'DRM-' + String(Math.floor(Math.random() * 9999)).padStart(4, '0');
                document.getElementById('generatedId').textContent = dreamId;

                loading.classList.remove('active');
                successMessage.classList.add('active');

                // Reset form
                form.reset();

            } catch (error) {
                loading.classList.remove('active');
                form.style.display = 'block';
                showNotification('ERROR: Transmission failed. Try again.');
            }
        });
        */

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');

            notificationText.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Loading dots animation
        let dotCount = 0;
        setInterval(() => {
            const dotsElement = document.querySelector('.dots');
            if (dotsElement) {
                dotCount = (dotCount + 1) % 4;
                dotsElement.textContent = '.'.repeat(dotCount);
            }
        }, 500);
    </script>
</body>
</html>
